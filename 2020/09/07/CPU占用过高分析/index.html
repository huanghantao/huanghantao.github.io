<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>CPU占用过高分析 | codinghuang的个人博客</title>
  <meta name="description" content="今天遇到了一个hyperf死循环的bug，排查了很久，没有思路。后来峰哥指导，立马定位出了问题。 定位步骤，首先，通过perf top命令来查看系统的cpu占用情况： 1234567891011121314perf top -p 19732Samples: 16K of event &amp;#x27;cpu-clock&amp;#x27;, 4000 Hz, Event count (approx.): 336">
<meta property="og:type" content="article">
<meta property="og:title" content="CPU占用过高分析">
<meta property="og:url" content="http://huanghantao.github.io/2020/09/07/CPU%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E5%88%86%E6%9E%90/index.html">
<meta property="og:site_name" content="codinghuang的个人博客">
<meta property="og:description" content="今天遇到了一个hyperf死循环的bug，排查了很久，没有思路。后来峰哥指导，立马定位出了问题。 定位步骤，首先，通过perf top命令来查看系统的cpu占用情况： 1234567891011121314perf top -p 19732Samples: 16K of event &amp;#x27;cpu-clock&amp;#x27;, 4000 Hz, Event count (approx.): 336">
<meta property="og:locale">
<meta property="article:published_time" content="2020-09-07T10:42:17.000Z">
<meta property="article:modified_time" content="2021-01-30T04:04:11.065Z">
<meta property="article:author" content="codinghuang">
<meta property="article:tag" content="性能分析">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://huanghantao.github.io/2020/09/07/CPU%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E5%88%86%E6%9E%90/index.html">
  
    <link rel="alternate" href="/atom.xml" title="codinghuang的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.1.1"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/huanghantao" target="_blank">
          <img class="img-circle img-rotate" src="/../images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">codinghuang</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">PHP Developer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form" method="GET" action="https://www.baidu.com/s?">
	<div class="input-group">
    	<input name="wd" type="text" class="form-control search-form-input" placeholder="Search" />
	    <span class="input-group-btn">
	    	<button type="submit" class=" btn btn-flat search-form-submit"><i class="icon icon-search"></i></button>
	    </span>
    </div>
</form>

</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/huanghantao" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/04/02/%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E4%BD%A0%E7%9A%84PHP%E4%BB%A3%E7%A0%81%E8%A2%AB%E6%88%90%E5%8A%9F%E7%9A%84Hook%E5%8D%8F%E7%A8%8B%E5%8C%96%E4%BA%86/" class="title">如何判断你的PHP代码被成功的Hook协程化了</a>
              </p>
              <p class="item-date">
                <time datetime="2021-04-02T09:10:33.000Z" itemprop="datePublished">2021-04-02</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/03/16/MacOS%E4%B8%8B%E6%97%A0%E6%B3%95%E5%AF%B9PHP%E6%89%A9%E5%B1%95%E8%BF%9B%E8%A1%8Cstrip%E7%9A%84%E9%97%AE%E9%A2%98/" class="title">MacOS下无法对PHP扩展进行strip的问题</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-16T09:16:06.000Z" itemprop="datePublished">2021-03-16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/03/15/%E4%BD%8E%E7%89%88%E6%9C%ACPHP%E6%97%A0%E6%B3%95%E6%B8%85%E7%90%86%E7%94%9F%E6%88%90%E7%9A%84configure%E6%96%87%E4%BB%B6%E7%9A%84%E9%97%AE%E9%A2%98/" class="title">低版本PHP无法清理生成的configure文件的问题</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-15T08:38:56.000Z" itemprop="datePublished">2021-03-15</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/03/13/C/C%E4%BB%A3%E7%A0%81%E4%BB%8Ex86%E8%BF%81%E7%A7%BB%E5%88%B0ARM%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E7%82%B9/" class="title">C代码从x86迁移到ARM需要注意的点</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-13T13:26:03.000Z" itemprop="datePublished">2021-03-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2021/03/04/PHP%E5%86%85%E6%A0%B8%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%B8%B8%E9%87%8F%E7%9A%84/" class="title">PHP内核是如何处理常量的</a>
              </p>
              <p class="item-date">
                <time datetime="2021-03-04T03:29:36.000Z" itemprop="datePublished">2021-03-04</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-CPU占用过高分析" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      CPU占用过高分析
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2020/09/07/CPU%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E5%88%86%E6%9E%90/" class="article-date">
	  <time datetime="2020-09-07T10:42:17.000Z" itemprop="datePublished">2020-09-07</time>
	</a>
</span>
        
        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/" rel="tag">性能分析</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2020/09/07/CPU%E5%8D%A0%E7%94%A8%E8%BF%87%E9%AB%98%E5%88%86%E6%9E%90/#comments" class="article-comment-link">Comments</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 2.7k(words)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 16(minutes)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>今天遇到了一个<code>hyperf</code>死循环的<code>bug</code>，排查了很久，没有思路。后来峰哥指导，立马定位出了问题。</p>
<p>定位步骤，首先，通过<code>perf top</code>命令来查看系统的<code>cpu</code>占用情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">perf top -p 19732</span><br><span class="line"></span><br><span class="line">Samples: 16K of event <span class="string">&#x27;cpu-clock&#x27;</span>, 4000 Hz, Event count (approx.): 3364648111 lost: 0/0 drop: 0/0</span><br><span class="line">Overhead  Shared Object        Symbol</span><br><span class="line">   9.02%  [kernel]             [k] _raw_spin_unlock_irqrestore</span><br><span class="line">   7.96%  php                  [.] execute_ex</span><br><span class="line">   6.85%  [kernel]             [k] finish_task_switch</span><br><span class="line">   2.82%  php                  [.] ZEND_FETCH_OBJ_R_SPEC_UNUSED_CONST_HANDLER</span><br><span class="line">   2.05%  libpthread-2.17.so   [.] __libc_recv</span><br><span class="line">   1.93%  php                  [.] ZEND_INIT_METHOD_CALL_SPEC_UNUSED_CONST_HANDLER</span><br><span class="line">   1.55%  libc-2.17.so         [.] __memmove_ssse3_back</span><br><span class="line">   1.43%  [vdso]               [.] __vdso_gettimeofday</span><br><span class="line">   1.35%  libc-2.17.so         [.] __memcpy_ssse3_back</span><br><span class="line">   1.31%  php                  [.] zend_leave_helper_SPEC</span><br></pre></td></tr></table></figure>

<p>可以看到，<code>execute_ex</code>这个函数的<code>Overhead</code>非常的高。所以，可以大改猜测是<code>PHP</code>代码的问题。然后，我们找到<code>PHP</code>的进程，用<code>strace</code>看一下进程在做啥事情：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">strace -p 19732</span><br><span class="line"></span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br><span class="line">recvfrom(20, <span class="string">&quot;-&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commandsthat may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>, 8192, 0, NULL, NULL) = 346</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$13</span>\r\nqueue:delayed\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 101, 0, NULL, 0) = 101</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*7\r\n<span class="variable">$16</span>\r\nZREVRANGEBYSCORE\r\n<span class="variable">$14</span>\r\nqueue:reserved\r\n<span class="variable">$10</span>\r\n1599474415\r\n<span class="variable">$4</span>\r\n-inf\r\n<span class="variable">$5</span>\r\nLIMIT\r\n<span class="variable">$1</span>\r\n0\r\n<span class="variable">$3</span>\r\n100\r\n&quot;</span>, 102, 0, NULL, 0) = 102</span><br><span class="line">recvfrom(20, <span class="string">&quot;*&quot;</span>, 1, MSG_PEEK, NULL, NULL) = 1</span><br><span class="line">recvfrom(20, <span class="string">&quot;*0\r\n&quot;</span>, 8192, 0, NULL, NULL) = 4</span><br><span class="line">recvfrom(20, 0x7f08526509e0, 1, MSG_PEEK, NULL, NULL) = -1 EAGAIN (Resource temporarily unavailable)</span><br><span class="line">sendto(20, <span class="string">&quot;*3\r\n<span class="variable">$5</span>\r\nBRPOP\r\n<span class="variable">$13</span>\r\nqueue:waiting\r\n<span class="variable">$1</span>\r\n2\r\n&quot;</span>, 42, 0, NULL, 0) = 42</span><br></pre></td></tr></table></figure>

<p>可以看到，<code>hyperf</code>应该是没有去判断<code>redis</code>是否崩溃，即使<code>redis</code>崩溃了，也在一直循环的读取<code>redis</code>。</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://huanghantao.github.io/2020/09/07/CPU占用过高分析/" title="CPU占用过高分析" target="_blank" rel="external">http://huanghantao.github.io/2020/09/07/CPU占用过高分析/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/huanghantao" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/../images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/huanghantao" target="_blank"><span class="text-dark">codinghuang</span><small class="ml-1x">PHP Developer</small></a></h3>
        <div>PHP开发者~</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2020/09/16/%E3%80%8A%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%BC%96%E5%86%99PHP%E7%BC%96%E8%AF%91%E5%99%A8%E3%80%8B-%E5%BC%80%E7%AF%87/" title="《手把手教你编写PHP编译器》--开篇"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2020/09/07/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AF%AD%E4%B9%89%E7%89%B9%E5%BE%81/" title="面向对象的语义特征"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>Maybe you could buy me a cup of coffee.</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan" />
              </div>
              <p class="text-muted mv">Scan this qrcode</p>
              <p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/huanghantao" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2021 codinghuang
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>



    <script>
(function ($) {
    $('.search-form').on('submit', function (e) {
        var keyword = $('.search-form-input[name="wd"]').val();
        window.location = 'https://www.google.com/search?q=' + keyword + '&sitesearch=https://huanghantao.github.io';
        return false;
    });
})(jQuery);
</script>





   




   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: 'YfC6P93PkD27hTmzIVqX9csy-gzGzoHsz',
    appKey: '8Od1wVUSFXlW18Hd1pXnQRhq',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>