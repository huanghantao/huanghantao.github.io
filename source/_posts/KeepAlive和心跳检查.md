---
title: KeepAlive和心跳检查
date: 2020-08-07 17:09:26
tags:
- 服务器开发
---

做长连接的服务，我们经常要去判断连接是否在线。那么我们怎么去判断连接是否在线呢？

首先，我们需要去明确连接是否在线的含义：

```txt
1. 连接之间因为网络等问题无法发送数据了，我们可以认为不在线了
2. 连接之间很长一段时间没有发送数据了，我们可以认为不在线了
```

针对第一种情况，我们可以使用操作系统提供的`KeepAlive`机制来检测连接之间是否可以发送数据。

针对第二种情况，我们可以通过心跳检查来判断某一段时间内，连接上是否有数据发送。
